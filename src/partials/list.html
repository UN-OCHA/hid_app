<div class="masthead">
  <h2 class="heading-contact-list">{{location}} <span translate>Contact List</span></h2>
</div>

<div class="main row page-list">
  <div class="active-contacts col-xs-12 col-sm-8 col-md-9 pull-right" cg-busy="contactsPromise">
    <form class="search-form">
      <div class="form-group">
        <label class="control-label element-invisible" for="text" translate>Search</label>
        <input class="form-control contact-search" type="search" name="text"
               placeholder="{{'Search by name, title, or organization'|translate}}" ng-model="query.text"/>
      </div>

      <div class="form-group">
        <input class="btn btn-primary btn-md element-invisible" ng-click="submitSearch()" type="submit"
               value="{{'Search'|translate}}"/>
      </div>
    </form>

    <ul class="list-group">
      <li class="profile-item list-group-item" ng-repeat="contact in contacts | orderBy: ['nameGiven', 'nameFamily']">
        <div class="contact-item contact-item--name">
          <a href="#/contact/{{contact._id}}">{{contact.nameGiven}} {{contact.nameFamily}}</a>
          <div class="contact-item__markers">
            <span class="contact-item__key-contact" ng-if="contact.keyContact">*</span>
            <span class="contact-item__verified" ng-if="contact._profile.verified"><i class="fa fa-check-circle"></i></span>
          </div>
        </div>
        <div class="contact-item contact-item--jobtitle">{{contact.jobtitle}}</div>
        <div class="contact-item contact-item--organization">{{contact.organization[0].name}}</div>
        <div class="contact-item contact-item--bundle">{{contact.bundle.join(', ')}}</div>
      </li>
    </ul>

    <div class="panel panel-danger" ng-if="contacts.length == 0">
      <div class="panel-heading"><em translate>No contacts found</em></div>
    </div>
  </div>


  <div class="sidebar-left" ng-class="{'show-options': sidebarOptions}">
    <div ng-show="!isRouteLoading">
      <div class="visible-xs">
        <div class="bottom-fixed-btn" role="presentation">
          <a href ng-click="sidebarOptions = !sidebarOptions"><div class="bottom-fixed-btn__arrow"></div>Contact List Filters</a>
        </div>
      </div>
    </div>

    <div class="actions-wrapper col-xs-12 col-sm-4 col-md-3">
      <form class="filter-form actions">

        <div class="form-group">
          <label class="control-label element-invisible" for="bundle" translate>Group</label>
          <select class="form-control" name="bundle" ng-model="query.bundle"
                  ng-options="bundleName for (bundleId, bundleName) in bundles">
            <option value="">Groups</option>
          </select>
        </div>

        <div class="divider"></div>

        <div class="form-group">
          <label class="control-label" for="verified"><i class="fa fa-check-circle"></i> <span translate>Verified User</span> <input type="checkbox" name="verified" ng-model="query.verified" /></label>

        </div>

        <div class="form-group" ng-if="query.locationId">
          <label class="control-label" for="keyContact"><span class="contact-item__key-contact key-contact-filter-use">*</span> <span translate>Key Contact</span> <input type="checkbox" name="keyContact" ng-model="query.keyContact" /></label>
        </div>

        <div class="divider"></div>

        <div class="form-group">
          <input class="btn btn-primary btn-lg btn-block" type="submit" ng-click="submitSearch()" value="{{'Search'|translate}}"/>
          <input class="btn btn-warning btn-lg btn-block" type="button" ng-click="resetSearch()" value="{{'Reset Filters'|translate}}"/>
        </div>
      </form>
    </div>
  </div>
</div>

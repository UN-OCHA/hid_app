<div class="page-list print">
  <div class='row masthead'>
    <div class="col-xs-12">
      <browser-alert></browser-alert>
      <h2 class="heading-contact-list"><span translate>Contact List</span> {{location}}</h2>
    </div>
  </div>
  <div class="row main">
    <div class="active-contacts col-xs-12">
      <table class="table table-striped">
        <thead>
          <tr>
            <th translate>Name</th>
            <th ng-if="locationId !== 'global'"translate>Group*</th>
            <th translate>Organization</th>
            <th translate>Job Title</th>
            <th translate>Phone</th>
            <th translate>Email</th>
            <th translate>Location</th>
          </tr>
        </thead>
        <tbody>
          <tr class="profile-item" ng-repeat="contact in contacts | orderBy: ['organization[0].name', 'nameGiven', 'nameFamily']">
            <th scope="row">{{contact.nameGiven}}<br/>{{contact.nameFamily}}</th>
            <td ng-if="locationId !== 'global'">
              <span ng-repeat="bundle in contact.bundle | orderBy">{{bundle}}{{ !$last ? ', ' : ''}}</span>
            </td>
            <td>{{contact.organization[0].name}}</td>
            <td>{{contact.jobtitle}}</td>
            <td>
              <span ng-repeat="phone in contact.phone">{{phone.number}} {{phone.type? '('+phone.type.charAt(0)+')' : ''}}{{ !$last ? ', ' : ''}}</span>
            </td>
            <td>
              <span ng-repeat="email in contact.email">{{email.address}} {{email.type? '('+email.type.charAt(0)+')' : ''}}{{ !$last ? ', ' : ''}}</span>
            </td>
            <td>
              <span ng-if="locationId !== 'global' && contact.address[0].locality">{{contact.address[0].locality}}{{contact.address[0].administrative_area ? ', ' : ''}}</span>
              <span ng-if="locationId !== 'global' && contact.address[0].administrative_area">{{contact.address[0].administrative_area}}</span>
              <span ng-if="locationId === 'global' && contact.address[0].country">{{contact.address[0].country}}</span>
            </td>
          </tr>
        </tbody>
      </table>
      <ul class="list-group" cg-busy="contactsPromise">
        <li class="list-header">
          <div class='col-xs-1' translate>Name</div>
          <div class='col-xs-1' translate>Group*</div>
          <div class='col-xs-1' translate>Organization</div>
          <div class='col-xs-2' translate>Job Title</div>
          <div class='col-xs-2' translate>Phone</div>
          <div class='col-xs-3' translate>Email</div>
          <div class='col-xs-2' translate>Location</div>
        </li>
        <li class="profile-item list-group-item" ng-repeat="contact in contacts | orderBy: ['nameGiven', 'nameFamily']">
          <div class="row">
            <div class="contact-item contact-item--name col-xs-12 col-md-3" >
              <a href="#/contact/{{contact._id}}">{{contact.nameGiven}} {{contact.nameFamily}}</a>
              <div class="contact-item__markers" ng-if="contact.keyContact || contact._profile.verified">
                <div class="contact-item__key-contact" title="Key Contact" ng-if="contact.keyContact">*</div>
                <span class="contact-item__verified" title="Verified" ng-if="contact._profile.verified"><i class="fa fa-check-circle"></i></span>
              </div>
            </div>
            <div class="contact-item contact-item--jobtitle col-xs-7 col-md-3"><span title="{{contact.jobtitle}}">{{contact.jobtitle}}</span></div>
            <div class="contact-item contact-item--organization col-xs-5" ng-class="(contact.bundle.length) ? 'col-md-3' : 'col-md-6'"><span title="{{contact.organization[0].name}}">{{contact.organization[0].name}}</span></div>
            <div class="contact-item contact-item--bundle col-md-3" ng-hide="!contact.bundle.length"><span title="{{contact.bundle.join(', ')}}">{{contact.bundle.join(', ')}}</span></div>
          </div>
        </li>
      </ul>

      <div class="panel panel-danger" ng-if="contacts.length == 0 && contactsCreated">
        <div class="panel-heading"><em translate>No contacts found</em></div>
      </div>
    </div>
  </div>
  <div id="print-footer">
    <div class="message">Powered by Humanitarian Id - to update your information, check in to http://humanitarian.id</div>
  </div>
</div>
